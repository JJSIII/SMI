//overthrow polyfill to enable native ios scrolling and overflow scroll on other mobile browsers
(function(k,d){var i=k.document,c=i.documentElement,b="overthrow-enabled",n="ontouchmove" in i,e="WebkitOverflowScrolling" in c.style||(!n&&k.screen.width>1200)||(function(){var p=k.navigator.userAgent,o=p.match(/AppleWebKit\/([0-9]+)/),r=o&&o[1],q=o&&r>=534;return(p.match(/Android ([0-9]+)/)&&RegExp.$1>=3&&q||p.match(/ Version\/([0-9]+)/)&&RegExp.$1>=0&&k.blackberry&&q||p.indexOf(/PlayBook/)>-1&&RegExp.$1>=0&&q||p.match(/Fennec\/([0-9]+)/)&&RegExp.$1>=4||p.match(/wOSBrowser\/([0-9]+)/)&&RegExp.$1>=233&&q||p.match(/NokiaBrowser\/([0-9\.]+)/)&&parseFloat(RegExp.$1)===7.3&&o&&r>=533)})(),j=function(p,o,r,q){return r*((p=p/q-1)*p*p+1)+o},h=false,g,m=function(r,x){var t=0,v=r.scrollLeft,w=r.scrollTop,q={top:"+0",left:"+0",duration:100,easing:k.overthrow.easing},u,p;if(x){for(var s in q){if(x[s]!==d){q[s]=x[s]}}}if(typeof q.left==="string"){q.left=parseFloat(q.left);u=q.left+v}else{u=q.left;q.left=q.left-v}if(typeof q.top==="string"){q.top=parseFloat(q.top);p=q.top+w}else{p=q.top;q.top=q.top-w}g=setInterval(function(){if(t++<q.duration){r.scrollLeft=q.easing(t,v,q.left,q.duration);r.scrollTop=q.easing(t,w,q.top,q.duration)}else{if(u!==r.scrollLeft){r.scrollLeft=u}if(p!==r.scrollTop){r.scrollTop=p}l()}},1);return{top:p,left:u,duration:q.duration,easing:q.easing}},a=function(p,o){return !o&&p.className&&p.className.indexOf("overthrow")>-1&&p||a(p.parentNode)},l=function(){clearInterval(g)},f=function(){if(h){return}h=true;if(e||n){c.className+=" "+b}k.overthrow.forget=function(){c.className=c.className.replace(b,"");if(i.removeEventListener){i.removeEventListener("touchstart",p,false)}k.overthrow.easing=j;h=false};if(e||!n){return}var s,w=[],o=[],v,y,x=function(){w=[];v=null},t=function(){o=[];y=null},r=function(){var C=(w[0]-w[w.length-1])*8,B=(o[0]-o[o.length-1])*8,A=Math.max(Math.abs(B),Math.abs(C))/8;C=(C>0?"+":"")+C;B=(B>0?"+":"")+B;if(!isNaN(A)&&A>0&&(Math.abs(B)>80||Math.abs(C)>80)){m(s,{left:B,top:C,duration:A})}},u,q=function(C){u=s.querySelectorAll("textarea, input");for(var B=0,A=u.length;B<A;B++){u[B].style.pointerEvents=C}},z=function(B,C){if(i.createEvent){var D=(!C||C===d)&&s.parentNode||s.touchchild||s,A;if(D!==s){A=i.createEvent("HTMLEvents");A.initEvent("touchend",true,true);s.dispatchEvent(A);D.touchchild=s;s=D;D.dispatchEvent(B)}}},p=function(I){l();x();t();s=a(I.target);if(!s||s===c||I.touches.length>1){return}q("none");var J=I,A=s.scrollTop,E=s.scrollLeft,K=s.offsetHeight,B=s.offsetWidth,F=I.touches[0].pageY,H=I.touches[0].pageX,L=s.scrollHeight,G=s.scrollWidth,C=function(P){var M=A+F-P.touches[0].pageY,N=E+H-P.touches[0].pageX,Q=M>=(w.length?w[0]:0),O=N>=(o.length?o[0]:0);if((M>0&&M<L-K)||(N>0&&N<G-B)){P.preventDefault()}else{z(J)}if(v&&Q!==v){x()}if(y&&O!==y){t()}v=Q;y=O;s.scrollTop=M;s.scrollLeft=N;w.unshift(M);o.unshift(N);if(w.length>3){w.pop()}if(o.length>3){o.pop()}},D=function(M){r();q("auto");setTimeout(function(){q("none")},450);s.removeEventListener("touchmove",C,false);s.removeEventListener("touchend",D,false)};s.addEventListener("touchmove",C,false);s.addEventListener("touchend",D,false)};i.addEventListener("touchstart",p,false)};k.overthrow={set:f,forget:function(){},easing:j,toss:m,intercept:l,closest:a,support:e?"native":n&&"polyfilled"||"none"};f()})(this);
